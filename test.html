<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Page Title</title>
    <!-- Add your CSS stylesheets and other meta tags as needed -->
</head>
<body>

<div>
    <div class="aside-filter">
        <div class="aside-title">
            <h2 class="title-head margin-top-0"><span>Bộ lọc</span></h2>
        </div>
        <div class="filter-container">
            <div class="filter-container__selected-filter" style="display: none;"></div>
            <div class="filter-container__selected-filter-list">
                <ul></ul>
            </div>
            <label for="price-range">Giá:</label>
            <input type="text" id="price-range" placeholder="Nhập giá" />
            <button id="filter-btn">Lọc</button>
        </div>
    </div>
</div>

<div id="products"></div>

<script>
    // Mock data for testing, replace this with actual data fetching logic
    const products = [
        { productId: '1', name: 'Product 1', price: { integerValue: 100 }, imgUrl: { arrayValue: { values: [{ stringValue: 'image1.jpg' }] } } },
        { productId: '2', name: 'Product 2', price: { integerValue: 150 }, imgUrl: { arrayValue: { values: [{ stringValue: 'image2.jpg' }] } } },
        // Add more products as needed
    ];

    // Function to handle price range filtering
    function filterByPrice(minPrice, maxPrice) {
        const filteredProducts = [];

        products.forEach((product) => {
            const productPrice = product.price.integerValue;

            if (productPrice >= minPrice && productPrice <= maxPrice) {
                filteredProducts.push(product);
            }
        });

        // Clear the current products
        document.getElementById('products').innerHTML = '';

        // Display the filtered products
        filteredProducts.forEach((product) => {
            document.getElementById('products').innerHTML += `
                <div style="border: 1px solid #ddd; width: 84%; margin-bottom: 5vh; margin-left: 2vw;">
                    <div class="product-box">
                        <div class="product-thumbnail">
                            <img src="${product.imgUrl.arrayValue.values[0].stringValue}">
                            <div class="hover-part">
                                <div class="pumpup-item" style="border-right: 1px solid white">
                                    <button class="look-button" id="${product.productId}">
                                        Xem nhanh
                                        <span>
                                            <img src="https://res.cloudinary.com/dfz0xsh2d/image/upload/v1699004047/Image_OJT7T4_Project1/Session3_body/eye_zfoznw.png"
                                                style="display: inline; width: 10px; height: auto" />
                                        </span>
                                    </button>
                                </div>
                                <div class="pumpup-item">
                                    <button class="details-button" id="${product.productId}">
                                        Mua ngay
                                        <span>
                                            <img src="https://res.cloudinary.com/dfz0xsh2d/image/upload/v1699004048/Image_OJT7T4_Project1/Session3_body/cart_gskmks.png"
                                                style="display: inline; width: 10px; height: auto" />
                                        </span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="product-info a-left">
                        <p style="margin:0;">${product.name}</p>
                        <p style="margin:0;">${product.price.integerValue} <u>đ</u></p>
                    </div>
                </div>
            `;
        });
    }

    // Event listener for the filter button
    const filterBtn = document.getElementById('filter-btn');
    filterBtn.addEventListener('click', () => {
        // Get the entered minimum and maximum prices
        const priceRangeInput = document.getElementById('price-range').value;
        if (priceRangeInput) {
            const [minPrice, maxPrice] = priceRangeInput.split('-').map(value => parseFloat(value.trim()));
            // Call the filterByPrice function with the entered price range
            filterByPrice(minPrice, maxPrice);
        } else {
            // If no price range entered, display all products
            renderProducts();
        }
    });

    // Function to render all products
    function renderProducts() {
        document.getElementById('products').innerHTML = '';
        products.forEach((product) => {
            document.getElementById('products').innerHTML += `
                <div style="border: 1px solid #ddd; width: 84%; margin-bottom: 5vh; margin-left: 2vw;">
                    <div class="product-box">
                        <div class="product-thumbnail">
                            <img src="${product.imgUrl.arrayValue.values[0].stringValue}">
                            <div class="hover-part">
                                <div class="pumpup-item" style="border-right: 1px solid white">
                                    <button class="look-button" id="${product.productId}">
                                        Xem nhanh
                                        <span>
                                            <img src="https://res.cloudinary.com/dfz0xsh2d/image/upload/v1699004047/Image_OJT7T4_Project1/Session3_body/eye_zfoznw.png"
                                                style="display: inline; width: 10px; height: auto" />
                                        </span>
                                    </button>
                                </div>
                                <div class="pumpup-item">
                                    <button class="details-button" id="${product.productId}">
                                        Mua ngay
                                        <span>
                                            <img src="https://res.cloudinary.com/dfz0xsh2d/image/upload/v1699004048/Image_OJT7T4_Project1/Session3_body/cart_gskmks.png"
                                                style="display: inline; width: 10px; height: auto" />
                                        </span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="product-info a-left">
                        <p style="margin:0;">${product.name}</p>
                        <p style="margin:0;">${product.price.integerValue} <u>đ</u></p>
                    </div>
                </div>
            `;
        });
    }

    // Initial rendering of all products
    renderProducts();
</script>

</body>
</html>
